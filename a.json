{
    "import": {
        "bin": [
            {
                "name": "http",
                "bin": "target/release/libhttp_server.so"
            },
            {
                "bin": "target/release/libswitch.so",
                "name": "switch"
            },
            {
                "name": "payload",
                "bin": "target/release/libpayload.so"
            }
        ]
    },
    "pipeline": [
        {
            "params": {
                "route": [
                    {
                        "attach": "match",
                        "path": "/send/{item}"
                    },
                    {
                        "path": "/health",
                        "attach": "health"
                    }
                ],
                "address": "127.0.0.1:8085"
            },
            "ref": "init",
            "module": "http"
        },
        {
            "params": {
                "attach": "default",
                "target": {
                    "___type": "script",
                    "___list": [
                        "payload.params.item"
                    ]
                },
                "case": [
                    {
                        "attach": "one",
                        "case": "one"
                    },
                    {
                        "case": "other",
                        "attach": "other"
                    }
                ]
            },
            "module": "switch",
            "ref": "match"
        },
        {
            "params": {
                "status_code": 403,
                "attach": "init",
                "headers": {
                    "content-type": "application/json"
                },
                "body": {
                    "___type": "script",
                    "___list": [
                        "\"{            \\\"value\\\": \"",
                        "( \"\\\"\" + payload.params.item + \"\\\"\" )",
                        "\",            \\\"type\\\": \\\"one\\\"        }\""
                    ]
                }
            },
            "module": "payload",
            "ref": "one"
        },
        {
            "params": {
                "headers": {
                    "content-type": "application/json"
                },
                "status_code": 200,
                "body": {
                    "___type": "script",
                    "___list": [
                        "\"{            \\\"value\\\": \\\"\"",
                        "( payload.params.item + \" 1\")",
                        "\" and \"",
                        "( payload.params.item + \" 2\")",
                        "\"\\\",            \\\"type\\\": \\\"other\\\"        }\""
                    ]
                },
                "attach": "init"
            },
            "ref": "other",
            "module": "payload"
        },
        {
            "params": {
                "case": [
                    {
                        "attach": "default_number",
                        "case": "number"
                    }
                ],
                "target": {
                    "___type": "embedded",
                    "___content": "&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;try&#x20;&#x7B;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;parse&#x5F;int&#x28;payload&#x2E;params&#x2E;item&#x29;&#x3B;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;return&#x20;&quot;number&quot;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x7D;&#x20;catch&#x20;&#x7B;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;return&#x20;&quot;string&quot;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x7D;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;",
                    "___runtime": "python"
                },
                "attach": "default_string"
            },
            "ref": "default",
            "module": "switch"
        },
        {
            "ref": "default_string",
            "params": {
                "status_code": 201,
                "body": {
                    "___list": [
                        "\"{            \\\"value\\\": \\\"\"",
                        "( payload.params.item )",
                        "\"\\\",            \\\"type\\\": \\\"default_string\\\"        }\""
                    ],
                    "___type": "script"
                },
                "attach": "init",
                "headers": {
                    "content-type": "application/json"
                }
            },
            "module": "payload"
        },
        {
            "ref": "default_number",
            "params": {
                "attach": "init",
                "headers": {
                    "content-type": "application/json"
                },
                "body": {
                    "___list": [
                        "\"{            \\\"value\\\": \\\"\"",
                        "( payload.params.item )",
                        "\"\\\",            \\\"type\\\": \\\"default_number\\\"        }\""
                    ],
                    "___type": "script"
                },
                "status_code": 201
            },
            "module": "payload"
        },
        {
            "module": "payload",
            "params": {
                "attach": "init",
                "headers": {
                    "content-type": "plain/text"
                },
                "body": "check",
                "status_code": 200
            },
            "ref": "health"
        }
    ]
}