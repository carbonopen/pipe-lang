{
    "pipeline": [
        {
            "ref": "init",
            "params": {
                "address": "127.0.0.1:8085",
                "route": [
                    {
                        "attach": "match",
                        "path": "/send/{item}"
                    },
                    {
                        "attach": "health",
                        "path": "/health"
                    }
                ]
            },
            "module": "http"
        },
        {
            "module": "switch",
            "params": {
                "target": {
                    "___type": "script",
                    "___list": [
                        "payload.params.item"
                    ]
                },
                "case": [
                    {
                        "attach": "one",
                        "case": "one"
                    },
                    {
                        "attach": "other",
                        "case": "other"
                    }
                ],
                "attach": "default"
            },
            "ref": "match"
        },
        {
            "ref": "one",
            "module": "payload",
            "params": {
                "status_code": 403,
                "headers": {
                    "content-type": "application/json"
                },
                "body": {
                    "___list": [
                        "\"{            \\\"value\\\": \"",
                        "( \"\\\"\" + payload.params.item + \"\\\"\" )",
                        "\",            \\\"type\\\": \\\"one\\\"        }\""
                    ],
                    "___type": "script"
                },
                "attach": "init"
            }
        },
        {
            "ref": "other",
            "params": {
                "status_code": 200,
                "attach": "init",
                "body": {
                    "___type": "script",
                    "___list": [
                        "\"{            \\\"value\\\": \\\"\"",
                        "( payload.params.item + \" 1\")",
                        "\" and \"",
                        "( payload.params.item + \" 2\")",
                        "\"\\\",            \\\"type\\\": \\\"other\\\"        }\""
                    ]
                },
                "headers": {
                    "content-type": "application/json"
                }
            },
            "module": "payload"
        },
        {
            "ref": "___local_run_1",
            "command": [
                "before",
                "default"
            ],
            "module": "run",
            "params": {
                "script": {
                    "___lang": "default",
                    "___content": "&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;try&#x20;&#x7B;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;parse&#x5F;int&#x28;payload&#x2E;params&#x2E;item&#x29;&#x3B;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;return&#x20;&quot;number&quot;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x7D;&#x20;catch&#x20;&#x7B;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;return&#x20;&quot;string&quot;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x7D;&#x0A;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;",
                    "___type": "embedded"
                },
                "runtime": "python3.2"
            }
        },
        {
            "params": {
                "target": {
                    "___type": "script",
                    "___list": [
                        "module.___local_run_1.payload"
                    ]
                },
                "case": [
                    {
                        "case": "number",
                        "attach": "default_number"
                    }
                ],
                "attach": "default_string"
            },
            "ref": "default",
            "module": "switch"
        },
        {
            "params": {
                "body": {
                    "___type": "script",
                    "___list": [
                        "\"{            \\\"value\\\": \\\"\"",
                        "( payload.params.item )",
                        "\"\\\",            \\\"type\\\": \\\"default_string\\\"        }\""
                    ]
                },
                "headers": {
                    "content-type": "application/json"
                },
                "attach": "init",
                "status_code": 201
            },
            "module": "payload",
            "ref": "default_string"
        },
        {
            "ref": "default_number",
            "module": "payload",
            "params": {
                "attach": "init",
                "status_code": 201,
                "body": {
                    "___type": "script",
                    "___list": [
                        "\"{            \\\"value\\\": \\\"\"",
                        "( payload.params.item )",
                        "\"\\\",            \\\"type\\\": \\\"default_number\\\"        }\""
                    ]
                },
                "headers": {
                    "content-type": "application/json"
                }
            }
        },
        {
            "module": "payload",
            "ref": "health",
            "params": {
                "attach": "init",
                "headers": {
                    "content-type": "plain/text"
                },
                "body": "check",
                "status_code": 200
            }
        }
    ],
    "import": {
        "bin": [
            {
                "bin": "target/release/libhttp_server.so",
                "name": "http"
            },
            {
                "name": "switch",
                "bin": "target/release/libswitch.so"
            },
            {
                "bin": "target/release/libpayload.so",
                "name": "payload"
            }
        ]
    }
}