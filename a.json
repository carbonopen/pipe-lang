{
    "pipeline": [
        {
            "ref": "init",
            "params": {
                "address": "127.0.0.1:8085",
                "route": [
                    {
                        "path": "/send/{item}",
                        "attach": "match"
                    },
                    {
                        "path": "/health",
                        "attach": "health"
                    }
                ]
            },
            "module": "http"
        },
        {
            "params": {
                "case": [
                    {
                        "attach": "one",
                        "case": "one"
                    },
                    {
                        "attach": "other",
                        "case": "other"
                    }
                ],
                "target": {
                    "___type": "script",
                    "___list": [
                        "payload.params.item"
                    ]
                },
                "attach": "default"
            },
            "ref": "match",
            "module": "switch"
        },
        {
            "params": {
                "body": {
                    "___list": [
                        "\"{            \\\"value\\\": \"",
                        "( \"\\\"\" + payload.params.item + \"\\\"\" )",
                        "\",            \\\"type\\\": \\\"one\\\"        }\""
                    ],
                    "___type": "script"
                },
                "attach": "init",
                "status_code": 403,
                "headers": {
                    "content-type": "application/json"
                }
            },
            "ref": "one",
            "module": "payload"
        },
        {
            "ref": "other",
            "module": "payload",
            "params": {
                "headers": {
                    "content-type": "application/json"
                },
                "status_code": 200,
                "body": {
                    "___list": [
                        "\"{            \\\"value\\\": \\\"\"",
                        "( payload.params.item + \" 1\")",
                        "\" and \"",
                        "( payload.params.item + \" 2\")",
                        "\"\\\",            \\\"type\\\": \\\"other\\\"        }\""
                    ],
                    "___type": "script"
                },
                "attach": "init"
            }
        },
        {
            "module": "switch",
            "params": {
                "case": [
                    {
                        "case": "number",
                        "attach": "default_number"
                    }
                ],
                "target": {
                    "___type": "script",
                    "___list": [
                        "try { parse_int(payload.params.item); \"number\"} catch { \"number\" }"
                    ]
                },
                "attach": "default_string"
            },
            "ref": "default"
        },
        {
            "ref": "default_string",
            "params": {
                "body": {
                    "___type": "script",
                    "___list": [
                        "\"{            \\\"value\\\": \\\"\"",
                        "( payload.params.item )",
                        "\"\\\",            \\\"type\\\": \\\"default_string\\\"        }\""
                    ]
                },
                "attach": "init",
                "headers": {
                    "content-type": "application/json"
                },
                "status_code": 201
            },
            "module": "payload"
        },
        {
            "params": {
                "status_code": 201,
                "attach": "init",
                "body": {
                    "___type": "script",
                    "___list": [
                        "\"{            \\\"value\\\": \\\"\"",
                        "( payload.params.item )",
                        "\"\\\",            \\\"type\\\": \\\"default_number\\\"        }\""
                    ]
                },
                "headers": {
                    "content-type": "application/json"
                }
            },
            "module": "payload",
            "ref": "default_number"
        },
        {
            "params": {
                "status_code": 200,
                "body": "check",
                "headers": {
                    "content-type": "plain/text"
                },
                "attach": "init"
            },
            "module": "payload",
            "ref": "health"
        }
    ],
    "import": {
        "bin": [
            {
                "name": "http",
                "bin": "target/release/libhttp_server.so"
            },
            {
                "bin": "target/release/libswitch.so",
                "name": "switch"
            },
            {
                "bin": "target/release/libpayload.so",
                "name": "payload"
            }
        ]
    }
}